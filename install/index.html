<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation - Sandstorm</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Installation";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 
  <script src="../analytics.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Sandstorm</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Using</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../using/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guided-tour/">Guided tour</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../using/top-bar/">Top bar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../using/how-it-works/">How it works</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../using/security-practices/">Security practices</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developing apps</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/">Overview of vagrant-spk</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/packaging-tutorial/">Packaging tutorial</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/packaging-tutorial-meteor/">Packaging tutorial (Meteor)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/publishing-apps/">App publishing guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/handbook/">App Developer Handbook</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/auth/">User authentication & permissions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/path/">Paths and URLs</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/customizing/">Understanding & customizing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/platform-stacks/">Platform stacks</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/code-dependencies/">Code dependencies</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/services/">Service dependencies</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/web-publishing/">Web publishing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/http-apis/">Exporting HTTP APIs</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/email-from-apps/">Email from apps</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vagrant-spk/design/">vagrant-spk design document</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/troubleshooting/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developing on raw Sandstorm</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/raw-packaging-guide/">Raw packaging guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/raw-python/">Raw integration of Python</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/raw-ruby-on-rails/">Raw integration of Ruby on Rails</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../developing/raw-pure-client-apps/">Raw integration of pure client apps</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Administering</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Installation</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#installation">Installation</a></li>
                
                    <li><a class="toctree-l4" href="#option-1-https-verified-install">Option 1: HTTPS-verified install</a></li>
                
                    <li><a class="toctree-l4" href="#option-2-github-verified-install">Option 2: GitHub-verified install</a></li>
                
                    <li><a class="toctree-l4" href="#option-3-pgp-verified-install">Option 3: PGP-verified install</a></li>
                
                    <li><a class="toctree-l4" href="#option-4-installing-from-source">Option 4: Installing from Source</a></li>
                
                    <li><a class="toctree-l4" href="#tips">Tips</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/sandcats/">Sandcats dynamic DNS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/email/">Email</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/demo/">Demo mode</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/backups/">Backups</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/wildcard/">Wildcard hosts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/reverse-proxy/">Reverse Proxy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/ssl/">HTTPS & SSL</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../administering/faq/">Frequently asked questions</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Sandstorm</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Administering &raquo;</li>
        
      
    
    <li>Installation</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/sandstorm-io/sandstorm/tree/master/docs" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installation">Installation</h1>
<p>There are many options for installing Sandstorm with various trade-offs. Choose the one that is most comfortable for you.</p>
<p>Sandstorm requires Linux x86_64, with kernel version 3.13 or later.</p>
<h2 id="option-1-https-verified-install">Option 1: HTTPS-verified install</h2>
<p>The easiest way to install Sandstorm is by running:</p>
<pre><code class="bash">curl https://install.sandstorm.io | bash
</code></pre>

<h2 id="option-2-github-verified-install">Option 2: GitHub-verified install</h2>
<p>If you are uncomfortable with <code>curl|bash</code>, another option is to <a href="https://raw.githubusercontent.com/sandstorm-io/sandstorm/master/install.sh">download install.sh from our GitHub repository</a> and then run it:</p>
<pre><code class="bash">wget https://raw.githubusercontent.com/sandstorm-io/sandstorm/master/install.sh
bash install.sh
</code></pre>

<p>This verifies that you're running our published installer script, even in the unlikely event that someone has compromised our download server or HTTPS certificate. The installer will verify signatures on all additional files it downloads.</p>
<h2 id="option-3-pgp-verified-install">Option 3: PGP-verified install</h2>
<p>If you'd rather not trust HTTPS at all, even from GitHub, another option is PGP-verified install.</p>
<ol>
<li>
<p>If you aren't experienced with GPG already, let's do these instructions in a new empty workspace to avoid confusion. (If you know what you're doing, you can skip this.)</p>
<p><pre><code class="hljs bash">export GNUPGHOME=$(mktemp -d)</code></pre></p>
</li>
<li>
<p>Download and import the Sandstorm releases keyring.</p>
<p><pre><code class="hljs bash">curl https://raw.githubusercontent.com/sandstorm-io/sandstorm/master/keys/release-keyring.gpg | \
    gpg --import</code></pre></p>
</li>
<li>
<p>Obtain the PGP key fingerprint of a Sandstorm developer you trust. There are several ways to do this:</p>
<ul>
<li>Web of trust (for PGP experts).</li>
<li><a href="http://www.meetup.com/Sandstorm-SF-Bay-Area/">Meet us in person</a> and ask for our business cards.</li>
<li>Use our Keybase profiles, for example: <a href="https://keybase.io/kentonv">Kenton Varda (kentonv)</a>, <a href="https://keybase.io/asheesh">Asheesh Laroia (asheesh)</a>, <a href="https://keybase.io/zarvox">Drew Fisher (zarvox)</a></li>
</ul>
</li>
<li>
<p>Download that developer's corresponding release key certificate <a href="https://github.com/sandstorm-io/sandstorm/tree/master/keys">from the Sandstorm github repo</a>. For example, if you chose Kenton:</p>
<p><pre><code class="hljs bash">wget https://raw.githubusercontent.com/sandstorm-io/sandstorm/master/keys/release-certificate.kentonv.sig</code></pre></p>
</li>
<li>
<p>Verify the certificate with GPG. For example:</p>
<p><pre><code class="hljs bash">gpg --decrypt release-certificate.kentonv.sig</code></pre></p>
<p>The output looks something like (emphasis added):</p>
<p><pre><code class="hljs nohighlight"><b>As of September 2015, Sandstorm releases are signed with the PGP key with
fingerprint 160D 2D57 7518 B58D 94C9  800B 63F2 2749 9DA8 CCBD. This assertion
will be updated monthly; do not trust this certificate after October 2015.</b>
<span style="color: #888">gpg: Signature made Wed 23 Sep 2015 04:20:25 PM PDT using RSA key ID 440DDCF1
gpg: Good signature from "Kenton Varda &lt;kentonv@keybase.io&gt;"
gpg:                 aka "Kenton Varda &lt;temporal@gmail.com&gt;"
gpg:                 aka "Kenton Varda &lt;kenton@sandstorm.io&gt;"
gpg:                 aka "Kenton Varda &lt;kenton@kentonshouse.com&gt;"
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.</span>
<b>Primary key fingerprint: 8802 23DF 25AA 25A9 433A  F0FB 4067 8458 440D DCF1</b></code></pre></p>
<p>Read the signed statement (top bolded part) and decide if it checks out, and make sure the fingerprint of the signer (bottom bolded part) matches the one you trust. Note that you can ignore GPG's warning that the signature isn't trusted because you're checking the fingerprint directly (an advanced user would instead have pre-arranged to trust the key and could thus ignore the fingerprint).</p>
<p>If you have the Keybase tools installed, you can use this much-friendlier command instead:</p>
<p><pre><code class="hljs bash">keybase decrypt -S kentonv release-certificate.kentonv.sig</code></pre></p>
</li>
<li>
<p>Download the installer script and its signature.</p>
<p><pre><code class="hljs bash">wget https://install.sandstorm.io/install.sh
wget https://install.sandstorm.io/install.sh.sig</code></pre></p>
</li>
<li>
<p>Verify the signature, making sure the signing key's fingerprint matches the one from the certificate.</p>
<p><pre><code class="hljs bash">gpg --verify install.sh.sig install.sh</code></pre></p>
</li>
<li>
<p>Run the installer.</p>
<p><pre><code class="hljs bash">bash install.sh</code></pre></p>
</li>
</ol>
<p>(Aside: You may wonder why our "release certificates" are signed natural-language statements, rather than using PGP key signing. The answer is that PGP key signing, or at least the GPG interface, does not seem well-equipped to handle expiring signatures that must be refreshed monthly. We'd like to improve this; please let us know if you have ideas!)</p>
<h2 id="option-4-installing-from-source">Option 4: Installing from Source</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>Please install the following:</p>
<ul>
<li>Linux x86_64, with kernel version 3.13 or later</li>
<li>C and C++ standard libraries and headers</li>
<li>GNU Make</li>
<li><code>libcap</code> with headers</li>
<li><code>xz</code></li>
<li><code>zip</code></li>
<li><code>unzip</code></li>
<li><code>strace</code></li>
<li><code>curl</code></li>
<li>ImageMagick</li>
<li>discount (markdown parser)</li>
<li><a href="http://clang.llvm.org/">Clang compiler</a> version 3.4 or better</li>
<li><a href="http://meteor.com">Meteor</a></li>
</ul>
<p>On Debian or Ubuntu, you should be able to get all these with:</p>
<pre><code>sudo apt-get install build-essential libcap-dev xz-utils zip \
    unzip imagemagick strace curl clang-3.4 discount git
curl https://install.meteor.com/ | sh
</code></pre>
<h3 id="get-the-source-code">Get the source code</h3>
<p>Get the source code from the git repository:</p>
<pre><code>git clone https://github.com/sandstorm-io/sandstorm.git
</code></pre>
<h3 id="building-installing-the-binaries">Building / installing the binaries</h3>
<p>Build the Sandstorm bundle:</p>
<pre><code>cd sandstorm
make
</code></pre>
<p>(Note: You should <em>not</em> use <code>-j</code>, as we only use make as a meta-build system. The major components will utilize all CPU cores.)</p>
<p>Install it:</p>
<pre><code>make install
</code></pre>
<p>This installs your locally-built bundle just as would get if you had installed using
<code>https://install.sandstorm.io</code>. You will be asked various configuration questions. If you intend
to hack on Sandstorm itself, you should choose to run the server to run under your local user
account (the default is to create a separate user called <code>sandstorm</code>).</p>
<p>If Sandstorm is already installed, you can update to your newly-built version like so:</p>
<pre><code>make update
</code></pre>
<p>Note that this only works if you installed Sandstorm to run at startup. Otherwise, you will
have to manually do:</p>
<pre><code>/path/to/sandstorm update sandstorm-0.tar.xz
</code></pre>
<h3 id="hacking-on-the-shell">Hacking on the shell</h3>
<p>You can run the shell (front-end) in dev mode so that you can modify it without rebuilding the
whole bundle for every change. Just do:</p>
<pre><code>cd shell
sudo service sandstorm stop-fe
./run-dev.sh
</code></pre>
<p>Now connect to your local server like you normally would.</p>
<p>Later, when you are done hacking, you may want to restart the installed front-end:</p>
<pre><code>sudo service sandstorm start-fe
</code></pre>
<h3 id="hacking-on-the-c">Hacking on the C++</h3>
<p>If you're going to edit C++, you will want to install <a href="https://github.com/sandstorm-io/ekam">Ekam</a>, the build system used by Sandstorm. Be sure to read Ekam's wiki to understand how it works.</p>
<p>Once <code>ekam</code> is in your path, you can use <code>make continuous</code> in order to start an Ekam continuous build of Sandstorm. While this build is running, you can also run other <code>make</code> commands in a separate window. This will automatically synchronize with your continuous build rather than starting a second build.</p>
<p>To do a debug build, run make like:</p>
<pre><code>make continuous CXXFLAGS="-g"
</code></pre>
<p>If you suspect you'll be hacking on Sandstorm's dependencies as well, you may want to follow the dependency symlink trick described in the Ekam readme.</p>
<h2 id="tips">Tips</h2>
<ul>
<li>If installing Sandstorm under LXC / Docker, you will need to choose the option to
  install as a non-root user. Unfortunately, this means the development tools will not
  work. This is due to the interaction between Sandstorm and Docker's use of Linux
  containerization features and missing features in the Linux kernel which we
  hope will be fixed eventually. For non-development purposes, Sandstorm should run just fine
  under Docker.</li>
<li>If you want to run on port 80, we recommend setting up an <a href="http://nginx.org/">nginx</a> reverse
  proxy rather than trying to get Node to open port 80 directly.  Make sure to configure
  <a href="http://nginx.org/en/docs/http/websocket.html">WebSocket forwarding</a>, which requires nginx
  1.3.13 or better.</li>
<li>If you want SSL, then you will definitely need an nginx proxy (or something equivalent). You will
  further need to use a wildcard certificate.</li>
</ul>
<p>For reference,
<a href="https://github.com/sandstorm-io/sandstorm/tree/master/nginx-example.conf">nginx-example.conf</a>
contains the http server part of nginx config used by Sandstorm Alpha.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../administering/sandcats/" class="btn btn-neutral float-right" title="Sandcats dynamic DNS"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../administering/" class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../administering/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../administering/sandcats/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
